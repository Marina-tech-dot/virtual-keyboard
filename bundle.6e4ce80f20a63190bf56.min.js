!function(){var t={659:function(t,e,s){var i={"./arrowleft.mp3":266,"./arrowright.mp3":831,"./backspace.mp3":950,"./capslock.mp3":533,"./enter.mp3":762,"./lang.mp3":787,"./microphone.mp3":473,"./shift.mp3":860,"./sound.mp3":850,"./space.mp3":537,"./tab.mp3":680,"./writtenKey.mp3":554};function n(t){var e=r(t);return s(e)}function r(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=659},266:function(t,e,s){"use strict";t.exports=s.p+"assets/4d07b928eb653f49e76b.mp3"},831:function(t,e,s){"use strict";t.exports=s.p+"assets/4d07b928eb653f49e76b.mp3"},950:function(t,e,s){"use strict";t.exports=s.p+"assets/97f5198f97e1fce2079b.mp3"},533:function(t,e,s){"use strict";t.exports=s.p+"assets/fc6a2f0fbf25870faf61.mp3"},762:function(t,e,s){"use strict";t.exports=s.p+"assets/83804b84acc395583ed7.mp3"},787:function(t,e,s){"use strict";t.exports=s.p+"assets/b8d01eb0571acdd075dd.mp3"},473:function(t,e,s){"use strict";t.exports=s.p+"assets/1370fe744d7ad93e877f.mp3"},860:function(t,e,s){"use strict";t.exports=s.p+"assets/a0c2ec8d0e4fca5bb094.mp3"},850:function(t,e,s){"use strict";t.exports=s.p+"assets/1370fe744d7ad93e877f.mp3"},537:function(t,e,s){"use strict";t.exports=s.p+"assets/fc6a2f0fbf25870faf61.mp3"},680:function(t,e,s){"use strict";t.exports=s.p+"assets/b8d1cd48e5ff23435984.mp3"},554:function(t,e,s){"use strict";t.exports=s.p+"assets/fc6a2f0fbf25870faf61.mp3"}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var n=i.length-1;n>-1&&!t;)t=i[n--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t}(),function(){"use strict";class t{constructor(t){this.$el="string"==typeof t?document.querySelector(t):t}append(e){return e instanceof t&&(e=e.$el),Element.prototype.append?this.$el.append(e):this.$el.appendChild(e),this}html(t){return"string"==typeof t?(this.$el.innerHTML=t,this):this.$el.outerHTML.trim()}insertText(t){return this.$el.textContent=t}addClass(t){return t&&this.$el.classList.add(...t),this}removeClass(t){return t&&this.$el.classList.remove(...t),this}addClassSetTimeout(t,e){if(t){for(let e=0;e<t.length;e++)this.$el.classList.add(t[e]);setTimeout((()=>{for(let e=0;e<t.length;e++)this.$el.classList.remove(t[e])}),e)}return this}toggleClass(t){return t&&this.$el.classList.toggle(...t),this}toggleClassSetTimeout(t,e){return t&&setTimeout((()=>{for(let e=0;e<t.length;e++)this.$el.classList.toggle(t[e])}),e),this}textContent(t){return t&&(this.$el.textContent=t),this}addDataAttribute(t){if(t)for(let e=0;e<t.length;e++)Object.keys(t[e]).map((s=>{this.$el.setAttribute(`data-${s}`,`${t[e][s]}`)}))}innerText(){return this.$el.innerText}css(t={}){const e=Object.entries(t).map((([t,e])=>`${t}:${e}`)).join(";");return this.$el.style.cssText=`${e}`}on(t,e){this.$el.addEventListener(t,e)}find(t){return this.$el.querySelector(t)}findAll(t){return this.$el.querySelectorAll(t)}children(t,s){return e(s.$el.children[t])}removeChild(t){this.$el.removeChild(t)}remove(){this.$el.remove()}hasClass(t){return this.$el.classList.contains(...t)}}function e(e){return new t(e)}e.create=(t,s)=>{const i=document.createElement(t);return s&&i.classList.add(s),e(i)};class i{constructor(){this.listeners={}}emit(t,...e){return!!Array.isArray(this.listeners[t])&&(this.listeners[t].forEach((t=>{t(...e)})),!0)}subscribe(t,e){return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(e),()=>{this.listeners[t]=this.listeners[t].filter((t=>t!==e))}}}function n(){let t,e,s,i;return window.innerWidth>=920&&(t="860px",s="830px"),window.innerWidth<920&&window.innerWidth>=720&&(t="688px",s="660px"),window.innerWidth<720&&(t="452px",s="425px"),window.innerHeight>=800&&(e="368px",i="277px"),window.innerHeight<800&&(e="230px",i="130px"),{monicWidth:t,monicHeight:e,textareaWidth:s,textareaHeight:i}}function r(t){return"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)}function a(t){return"string"!=typeof t?"":t.charAt(0).toLowerCase()+t.slice(1)}function o(t,e=null){return e?localStorage.setItem(t,JSON.stringify(e)):JSON.parse(localStorage.getItem(t))}class c{constructor(t){this.store=t,this.sub=null,this.prevState={}}subscribeComponents(t){this.prevState=this.store.getState(),this.sub=this.store.subscribe((e=>{Object.keys(e).forEach((s=>{var i,n;i=this.prevState[s],n=e[s],("object"==typeof i&&"object"==typeof n?JSON.stringify(i)===JSON.stringify(n):i===n)||t.forEach((t=>{if(t.isWatching(s)){const i={[s]:e[s]};t.storeChanged(i)}}))})),this.prevState=this.store.getState()}))}unsubscribeFromStore(){this.sub.unsubscribe()}}class l{constructor(t,e){this.$root=t,this.listeners=e}initDomListeners(){this.listeners.forEach((t=>{const e=u(t);if(!this[e])throw new Error(`Method ${e} is not implemented in ${this.name||""} Component`);this[e]=this[e].bind(this),this.$root.on(t,this[e])}))}removeDomListeners(){this.listeners.forEach((t=>{const e=u(t);this.$root.off(t,this[e])}))}}function u(t){return`on${r(t)}`}class d extends l{constructor(t,e={}){super(t,e.listeners),this.emitter=e.emitter,this.unsubscribers=[],this.store=e.store,this.subscribe=e.subscribe||[],this.prepare()}prepare(){}init(){this.initDomListeners()}destroy(){this.removeDomListeners()}$emit(t,...e){this.emitter.emit(t,...e)}$on(t,e){const s=this.emitter.subscribe(t,e);this.unsubscribers.push(s)}$dispatch(t){this.store.dispatch(t)}storeChanged(){}isWatching(t){return this.subscribe.includes(t)}}function h(){return`\n      <div class="monic__inner-screen">\n        <div class="monic__screen" id="monic">\n          <textarea class="key-bord__text" id="written" style="${function(t={}){return`${Object.entries(t).map((([t,e])=>`${t}:${e}`)).join(";")}`}({width:n().textareaWidth,height:n().textareaHeight})}" pattern="[0-9]{3}"></textarea>\n          <div class="interim">\n            <p class="interim__result"></p>\n          </div>\n        </div>\n      </div>\n      <div class="monic__panel">\n        <div class="monic__item">\n          <p class="_icon-keyboard" data-clava=true></p>\n        </div>\n      </div>\n    `}function p(t){return{type:"ADD_TO_LS",data:t}}const g=o("keyBoard-state")||{},M=[{1:{1:{rowIterator:!1,appendHTML:'\n          <div class="_icon-voice" data-functional="Microphone"></div>\n          <div class="circle voice" data-functional="Microphone" id="microphone"></div>\n      ',dataAttributes:[{functional:"Microphone"}],classes:!1,innerText:!1},2:{rowIterator:!1,appendHTML:`\n          <div class="_icon-sound" data-functional="Sound"></div>\n          <div class="circle sound ${g.Sound?"active":""}" data-functional="Sound" id="circle"></div>\n        `,dataAttributes:[{functional:"Sound"}],classes:!1,innerText:!1},3:{rowIterator:!0,keboardRowsValues:[1,2,3,4,5,6,7,8,9,0]},4:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"Backspace"}],classes:["el-shift-backsp","_icon-delete"],innerText:!1}}},{2:{1:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"Tab"}],classes:["el-shift-backsp","_icon-tab"],innerText:!1},2:{rowIterator:!0,keboardRowsValues:{en:["q","w","e","r","t","y","u","i","o","p","[","]"],ru:["й","ц","у","к","е","н","г","ш","щ","з","х","ъ"]}}}},{3:{1:{rowIterator:!1,appendHTML:`\n          <div class="circle capsLock ${g.CapsLock?"active":""}" id="CapsLock"></div>\n        `,dataAttributes:[{functional:"CapsLock"}],classes:["el-caps","_icon-caps"],innerText:!1},2:{rowIterator:!0,keboardRowsValues:{en:["a","s","d","f","g","h","j","k","l",";",":"],ru:["ф","ы","в","а","п","р","о","л","д","ж","э"]}},3:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"Enter"}],classes:["el-enter","_icon-enter"],innerText:!1}}},{4:{1:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"Shift"}],classes:["el-shift-backsp","_icon-shift"],innerText:!1},2:{rowIterator:!0,keboardRowsValues:{en:["z","x","c","v","b","n","m",",",".","?","!","@"],ru:["я","ч","с","м","и","т","ь","б","ю","?","!","@"]}}}},{5:{1:{rowIterator:!1,appendHTML:`\n          <div class="key-bord__el-en ${"en"===g.Lang?"":"paint"}" data-functional="Lang" data-lang="en">en</div>\n          <div class="key-bord__el-slash" data-functional="Lang">/</div>\n          <div class="key-bord__el-ru ${"ru"===g.Lang?"":"paint"}" data-functional="Lang" data-lang="ru">ru</div>\n        `,dataAttributes:[{functional:"Lang"}],classes:["en-ru"],innerText:!1},2:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"Space"}],classes:["el-space"],innerText:" "},3:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"ArrowLeft"}],classes:["_icon-left-arrow"],innerText:!1},4:{rowIterator:!1,appendHTML:!1,dataAttributes:[{functional:"ArrowRight"}],classes:["_icon-right-arrow"],innerText:!1}}}],f={ru:{q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж",":":"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",",":"б",".":"ю",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","!":"!","?":"?","@":"@"},en:{q:"q",w:"w",e:"e",r:"r",t:"t",y:"y",u:"u",i:"i",o:"o",p:"p","]":"]","[":"[",a:"a",s:"s",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",";":";",":":":",z:"z",x:"x",c:"с",v:"v",b:"b",n:"n",m:"m",",":",",".":".",0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","!":"!","?":"?","@":"@"},simbols:{1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},numbers:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},functional:["CapsLock","Enter","ArrowRight","ArrowLeft","Space","Lang","Shift","Tab","Backspace","Sound","Microphone"]};function m(t,s){let i=t.key;const n={Lang:""};if(" "===i)i="Space";else if(i.charCodeAt()>=65&&i.charCodeAt()<=90&&1===i.length)i=i.toLowerCase(),n.Lang="ru";else if(a(i).charCodeAt()>=1072&&a(i).charCodeAt()<=1103&&1===i.length){const t=Object.entries(f.ru).filter((([t,e])=>{if(a(i)===e)return t})).flat()[0];i=t,n.Lang="en"}const r=e(document).find(`[data-write= "${i||a(i)}"]`),o=e(document).find(`[data-functional= "${i}"]`),c=r||o;return c&&"add"===s?e(c).addClass(["key-shown"]):c&&"remove"===s&&e(c).removeClass(["key-shown"]),n.Lang||1===i.length&&(n.Lang="ru"),n}function x(t,e){!function(t,e,s){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,s);else if(t.createTextRange){const i=t.createTextRange();i.collapse(!0),i.moveEnd("character",s),i.moveStart("character",e),i.select()}}(t,e,e)}function y(){const t=document.querySelector("#written");return{currentTextarea:t,currentCursorPos:t.selectionStart}}function T(t,e){return!!t.includes(e)}function S(t){return{Enter:"\n",Tab:"\t",Space:" "}[t]}function L(t,e,s){const i=document.querySelector(t);return(s=s.getState())[e]?(i.classList.remove("active"),!1):(i.classList.add("active"),!0)}function w(t,e){let s=t;return(o("keyBoard-state")||{}).CapsLock&&"string"==typeof t&&(s=t.toUpperCase()),`\n    <div class="key-bord__row-el" data-write="${e}" data-voice="write">${s}</div>\n  `}function b(t){const e=t.target.dataset.functional;return!!T(["Enter","Tab","Space"],e)&&S(e)}function N(t,e){const s=t.target.dataset.functional;return!!T(["Lang","CapsLock","Shift","Sound","Backspace"],s)&&function(t,e){e=e.getState();let s="";return"Lang"!==t?(s=!e||!e[t],{[t]:s}):(s="en"===e[t]?"ru":"en",{[t]:`${s}`})}(s,e)}function I(t,e){const s=t.getState();let{Lang:i}=s;e&&(i="en"===i?"ru":"en"),function(t,e){const s="en"===e?"ru":"en",i=document.querySelector(t),n=document.querySelector(`[data-lang="${s}"]`);i.classList.add("paint"),n.classList.remove("paint")}(`[data-lang="${i}"]`,i)}function j(t,e){const i=[],n=["arrowleft","arrowright","backspace","capslock","enter","lang","microphone","shift","sound","space","tab","writtenKey"];var r,a;r=i,(a=s(659)).keys().forEach(((t,e)=>r[e]=a(t)));const o=function(t,e){return t.map(((t,s)=>({[e[s]]:t})))}(i,n);if(!(e=e.getState()).Sound)return;const c=document.createElement("audio");let l;l=t.target.dataset.write||t.target.dataset.functional?t.target.dataset.write?"writtenKey":t.target.dataset.functional.toLowerCase():n.includes(t.key)?t.key:" "===t.key?"space":"writtenKey",c.src=`${function(t,e){return(t=t.map((t=>Object.keys(t).join("")===e?t[e]:""))).join("")}(o,l)}`,c.play(),c.volume=.7}function k(t){document.querySelectorAll("[data-write]").forEach((e=>{const s=o("keyBoard-state"),i=e.getAttribute("data-write");if("CapsLock"===t){const{CapsLock:t}=s,{Lang:n}=s;if(!t&&f[n][i].toUpperCase()){const t=f[n][i].toUpperCase();e.textContent=t}if(t){const t=f[n][i];e.textContent=t}return!1}if("Shift"===t){const{Shift:t}=s,{Lang:n}=s,{CapsLock:r}=s;if(f.simbols[i]){if(!t){const t=f.simbols[i];e.textContent=t}if(t){const t=f.numbers[i];e.textContent=t}}if(f.en[i]&&!f.simbols[i]){if(!t){const t=f[n][i].toUpperCase();e.textContent=t}if(t&&!r){const t=f[n][i];e.textContent=t}}}if("Lang"===t){const{Lang:t}=s,{CapsLock:n}=s,r="ru"===t?"en":"ru";if(n){if(f[r][i].toUpperCase()){const t=f[r][i].toUpperCase();e.textContent=t}}else{const t=f[r][i];e.textContent=t}}}))}class D extends d{static className="key-bord__monic";static initialStyle={widht:n().monicWidth,height:n().monicHeight};constructor(t,e){super(t,{name:"Monitor",listeners:["click","keyup","keydown"],...e})}init(){super.init(),this.textarea=this.$root.find("#written"),this.textarea.focus(),this.textarea.value=this.store.getState().Textarea,this.textarea.scrollTop=this.textarea.scrollHeight,this.pressedKey=new Set,this.$on("klava:clickSimbol",(t=>{this.textarea.focus(),this.pressedWrittenKey(t),this.textarea.scrollTop=this.textarea.scrollHeight,this.textarea.focus()})),this.$on("klava:clickBackspace",(t=>{this.textarea.focus(),this.addToLS({Textarea:t.Textarea}),this.textarea.value=this.store.getState().Textarea,this.textarea.selectionEnd=t.setSelectionEnd-1})),this.$on("monic:wasKeydown",(t=>{this.addToLS({Textarea:t})})),this.$on("monic:pressedKey",(()=>{document.addEventListener("keydown",(t=>{t.getModifierState("CapsLock")?this.addToLS({CapsLock:!0}):this.addToLS({CapsLock:!1}),t.getModifierState("Shift")?this.addToLS({Shift:!0}):this.addToLS({Shift:!1})})),function(){const t=document.querySelector("#CapsLock"),e=o("keyBoard-state"),{CapsLock:s}=e;s?t.classList.add("active"):t.classList.remove("active")}()})),this.$on("klava:microIsOff",(()=>{this.addToLS({Textarea:this.textarea.value});e(".interim__result").insertText(""),setTimeout((()=>{this.textarea.scrollTop=this.textarea.scrollHeight,this.textarea.focus()}),300)})),this.$on("klava:ArrowLeftIsOn",(()=>{this.textarea.focus();const t=this.textarea.selectionStart;x(this.textarea,t-1),this.addToLS({setSelectionEnd:t-1})})),this.$on("klava:ArrowRightIsOn",(()=>{this.textarea.focus();const t=this.textarea.selectionStart;x(this.textarea,t+1)}))}toHTML(){return h()}addToLS(t){this.$dispatch(p({value:t}))}pressedWrittenKey(t){const e=function(t,e){let s;if(t.getState().setSelectionEnd){const i=t.getState().setSelectionEnd;return s=y().currentTextarea.value.slice(0,i)+e+y().currentTextarea.value.slice(i),{Textarea:s,setSelectionEnd:i}}const i=y().currentTextarea.selectionStart;return s=y().currentTextarea.value+e,{Textarea:s,setSelectionEnd:i}}(this.store,t);this.addToLS({Textarea:e.Textarea}),this.addToLS({setSelectionEnd:e.setSelectionEnd}),this.textarea.value=this.store.getState().Textarea,this.textarea.selectionEnd=this.store.getState().setSelectionEnd+1,this.addToLS({setSelectionEnd:e.setSelectionEnd+1})}onClick(t){if(t.target.dataset.clava){e(t.target).toggleClass(["inactive"]),this.$emit("monic:clickKlavaHider"),this.textarea.focus(),setTimeout((()=>{this.textarea.scrollTop=this.textarea.scrollHeight+1e3}),400)}}onKeydown(t){this.pressedKey.add(t.code),!1===function(t){const e=Object.entries(f.ru).flat(),s=e.map((t=>t.toUpperCase()));return e.concat(s).concat(f.functional).concat([" "]).includes(t)}(t.key)&&t.preventDefault(),this.$emit("monic:pressedKey");const e=t.key;j(t,this.store),"Tab"===e&&(t.preventDefault(),document.onkeyup=()=>{document.onkeyup=null,this.$emit("klava:clickSimbol",S("Tab"))}),m(t,"add"),m(t).Lang&&(this.addToLS({lastInputWasThroughKeydown:!0}),this.addToLS(m(t)),I(this.store),k("Lang")),this.addToLS({setSelectionEnd:y().currentCursorPos})}onKeyup(t){this.pressedKey.delete(t.code),m(t,"remove"),this.$emit("monic:wasKeydown",this.textarea.value)}}class v extends d{constructor(...t){super(...t)}get template(){return JSON.stringify(this.state,null,2)}initState(t={}){this.state={...t}}setState(t){this.state={...this.state,...t},this.$root.html(this.template)}}class A{constructor(t,s){this.className=t,this.src=s,this.$dom=e(".monic__screen")}show(){const t=e.create("img",this.className);t.$el.src=this.src,t.$el.alt=`${this.className} image`,this.$dom.append(t),this.$el=t}isExist(){return Boolean(this.$el)}destroy(){const t=this.$dom.find(`.${this.className}`);this.$dom.removeChild(t)}}const C={"точка":".","запятая":",","вопрос":"?","восклицание":"!","двоеточие":":","тире":"-","абзац":"\n","отступ":"\t"};function E(t){return t.split(" ").map((t=>(t=t.trim(),C[t.toLowerCase()]?C[t.toLowerCase()]:t))).join(" ")}let $="";const O=new(window.SpeechRecognition||window.webkitSpeechRecognition);O.continuous=!0,O.interimResults=!0,O.maxAlternatives=1,O.lang={en:"en-EN",ru:"ru-RU"}[JSON.parse(localStorage.getItem("keyBoard-state"))?.Lang]||"en",O.onend=()=>{$=""},O.onresult=t=>{const s=e(".key-bord__text"),i=e(".interim__result");let n="";for(let e=t.resultIndex;e<t.results.length;++e)if(t.results[e].isFinal){const n=t.results[e][0].transcript.replace(/\s{1,}([+,?!:-])/g,"$1");$+=`${r(n.trim())}. `,s.$el.value=`${JSON.parse(localStorage.getItem("keyBoard-state")).Textarea} ${$} `,i.insertText("")}else n=E(t.results[e][0].transcript),i.insertText(` ${n}`)};const z=o("keyBoard-state")||{};class _{constructor(t){this.indexData=0,this.indexDataAtribute=0,this.data=Array.isArray(t)?t:t[z.Lang]||t.en,this.dataAttribute=Array.isArray(t)?t:t.en}[Symbol.iterator](){return{next:()=>this.indexData<this.data.length?{value:w(this.data[this.indexData++],this.dataAttribute[this.indexDataAtribute++]),done:!1}:(this.indexData=0,this.indexDataAtribute=0,{done:!0,value:void 0})}}}const U=function(t,e={}){let s=t({...e},{type:"__INIT__"}),i=[];return{subscribe(t){return i.push(t),{unsubscribe(){i=i.filter((e=>e!==t))}}},dispatch(e){s=t(s,e),i.forEach((t=>t(s)))},getState(){return JSON.parse(JSON.stringify(s))}}}((function(t,e){if("ADD_TO_LS"===e.type){const s=Object.keys(e.data.value).join(""),i=e.data.value[s];return{...t,[s]:i}}return t}),o("keyBoard-state")?o("keyBoard-state"):{Lang:"en",CapsLock:!1,Sound:!1,Shift:!1,Textarea:"",Microphone:!1,setSelectionEnd:""});U.subscribe((t=>{o("keyBoard-state",t)})),e("body").html('\n    <div class="wrapper">\n    <main class="key-bord" id="keyboard">\n    </main>\n  </div>\n  ');new class{constructor(t,s={}){this.$el=e(t),this.components=s.components||[],this.emitter=new i,this.store=s.store,this.subscriber=new c(this.store)}getRoot(){const t=e.create("div","key-bord__body"),s={emitter:this.emitter,store:this.store};return this.components=this.components.map((i=>{const n=e.create("div",i.className);n.css(i.initialStyle),n.addClass(i.additionalClasses);const r=new i(n,s);return n.html(r.toHTML()),t.append(n),r})),t}render(){this.$el.append(this.getRoot()),this.subscriber.subscribeComponents(this.components),this.components.forEach((t=>t.init()))}destroy(){this.components.forEach((t=>t.destroy()))}}("#keyboard",{components:[D,class extends v{static className="key-bord__clava";static additionalClasses=["comeback"];constructor(t,e){super(t,{name:"Klava",listeners:["click"],...e})}prepare(){this.addToLS({Shift:!1,Lang:"en"})}init(){super.init(),this.addToLS({Microphone:!0}),this.$on("monic:clickKlavaHider",(()=>{!function(){const t=e(document.querySelector(".key-bord__clava")),s=e(document.querySelector(".key-bord__monic")),i=e(document.querySelector(".key-bord__text"));t.toggleClass(["comeback"]),t.toggleClass(["hidden"]),t.hasClass(["hidden"])?(s.css({width:`${window.innerWidth}px`,height:`${window.innerHeight}px`,transition:"all 0.3s ease 0s",margin:"0px"}),i.css({width:window.innerWidth-30+"px",height:window.innerHeight-100+"px",transition:"all 0.3s ease 0s"}),t.css({display:"none"})):t.hasClass(["comeback"])&&(s.css({width:`${n().monicWidth}`,height:`${n().monicHeight}`,transition:"all 0.3s ease 0s","margin-bottom":"16px"}),i.css({width:`${n().textareaWidth}`,height:`${n().textareaHeight}`,transition:"all 0.3s ease 0s"}),t.css({display:"block"}))}()}))}async toHTML(){try{this.$root=await(t=this.$root,new Promise((s=>{for(let s=0;s<M.length;s++){const i=e.create("div","key-bord__row");Object.values(M[s][s+1]).forEach((t=>{if(t.rowIterator){const e=new _(t.keboardRowsValues);for(const t of e)i.$el.insertAdjacentHTML("beforeend",t)}else{const s=e.create("div","key-bord__row-el");s.addClass(t.classes).textContent(t.innerText).addDataAttribute(t.dataAttributes),s.html(t.appendHTML),i.append(s)}})),t.append(i)}s(t)}))),I(this.store,!0)}catch{throw new Error("Error in painting LangBTN on initial state")}var t}addToLS(t){this.$dispatch(p({value:t}))}onClick(t){t.preventDefault(),this.addToLS({setSelectionEnd:y().currentCursorPos});if(this.store.getState().lastInputWasThroughKeydown){const t="ru"===this.store.getState().Lang?{Lang:"en"}:{Lang:"ru"};this.addToLS(t),this.addToLS({lastInputWasThroughKeydown:!1})}const s=t.target.dataset.write,i=t.target.dataset.functional;if(s&&this.store.getState().Microphone){const s=e(t.target).innerText();this.$emit("klava:clickSimbol",s),this.store.getState().Shift&&(k("Shift"),this.addToLS({Shift:!1}))}else if(b(t)&&this.store.getState().Microphone)this.$emit("klava:clickSimbol",b(t));else if(N(t,this.store)&&this.store.getState().Microphone){const e=t.target.dataset.functional,s=N(t,this.store);"Backspace"===e?this.$emit("klava:clickBackspace",function(){const t=y();return{Textarea:t.currentTextarea.value.slice(0,t.currentCursorPos-1)+t.currentTextarea.value.slice(t.currentCursorPos),setSelectionEnd:t.currentCursorPos}}()):"CapsLock"===e?(!function(t){L("#CapsLock","CapsLock",t)}(this.store),k("CapsLock")):"Shift"===e?k("Shift"):"Lang"===e?(I(this.store),k("Lang")):"Sound"===e&&function(t){L("#circle","Sound",t)}(this.store),this.addToLS(s)}if("Microphone"===i){this.addToLS({Microphone:!this.store.getState().Microphone}),L("#microphone","Microphone",this.store),L("#written","Microphone",this.store),n=".key-bord__row-el",r=0,document.querySelectorAll(n).forEach(((t,e)=>{e!==r&&(t.classList.toggle("active"),t.style.CursorPointer="none")}));const t=new A("microphone","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzYiIGhlaWdodD0iMzYiIHZpZXdCb3g9IjAgMCAzNiAzNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIzLjkwNzkgMTAuMTQzN1YxNS43NzIySDEyLjYyMDVWMTAuMTQzN0MxMi42MjA1IDcuMDI1MjIgMTUuMTQ1NyA0LjUgMTguMjY0MiA0LjVDMTkuODMxMSA0LjUgMjEuMjMwNiA1LjEzODkxIDIyLjI1NzQgNi4xNTA1MkMyMy4yNzY2IDcuMTc3MzQgMjMuOTA3OSA4LjU3Njg2IDIzLjkwNzkgMTAuMTQzN1YxMC4xNDM3WiIgZmlsbD0iIzY1NjU2NSIvPgo8cGF0aCBkPSJNMTIuNjIwNSAxNi4yMjg2SDIzLjkwNzlWMTguOTM2NEMyMy45MDc5IDIyLjA1NDkgMjEuMzgyNyAyNC41ODAxIDE4LjI2NDIgMjQuNTgwMUMxNS4xNDU3IDI0LjU4MDEgMTIuNjIwNSAyMi4wNTQ5IDEyLjYyMDUgMTguOTM2NFYxNi4yMjg2VjE2LjIyODZaIiBmaWxsPSIjNjU2NTY1Ii8+CjxwYXRoIGQ9Ik0yNi42ODQxIDE1Ljk5MjhDMjYuMjIwMiAxNS45OTI4IDI1Ljg0NzUgMTYuMzY1NSAyNS44NDc1IDE2LjgyOTVWMTguNTU2QzI1Ljg0NzUgMjIuNTk0OSAyMi44MDUgMjYuMTI0MSAxOC43NzM4IDI2LjM5MDNDMTQuMzU0NyAyNi42ODY5IDEwLjY3MzMgMjMuMTcyOSAxMC42NzMzIDE4LjgyMjJWMTYuODI5NUMxMC42NzMzIDE2LjM2NTUgMTAuMzAwNiAxNS45OTI4IDkuODM2NjcgMTUuOTkyOEM5LjM3MjcgMTUuOTkyOCA5IDE2LjM2NTUgOSAxNi44Mjk1VjE4LjU1NkM5IDIzLjM3MDcgMTIuNTY3MyAyNy41OTIxIDE3LjM1OTEgMjguMDQwOEMxNy4zNjY3IDI4LjA0MDggMTcuMzgxOSAyOC4wNDA4IDE3LjM4OTUgMjguMDQwOFYzMS4yODFIMTUuODYwN0MxNS4zODE1IDMxLjI4MSAxNS4wMDEyIDMxLjY2ODkgMTUuMDAxMiAzMi4xNDA1QzE1LjAwMTIgMzIuNjEyMSAxNS4zODkxIDMzIDE1Ljg2MDcgMzNIMjAuNDdDMjAuOTQ5MiAzMyAyMS4zMjk1IDMyLjYxMjEgMjEuMzI5NSAzMi4xNDA1QzIxLjMyOTUgMzEuNjY4OSAyMC45NDE2IDMxLjI4MSAyMC40NyAzMS4yODFIMTkuMTE2MVYyOC4wMzMyQzIzLjgxNjcgMjcuNTkyMSAyNy41MDU2IDIzLjYzNjkgMjcuNTA1NiAxOC44Mjk5VjE2LjgzNzFDMjcuNTA1NiAxNi4zNzMxIDI3LjEzMjkgMTYuMDAwNCAyNi42Njg5IDE2LjAwMDRMMjYuNjg0MSAxNS45OTI4WiIgZmlsbD0iIzY1NjU2NSIvPgo8cGF0aCBkPSJNMTguMjY0MiAxMS44NTUxQzE4LjcwMTEgMTEuODU1MSAxOS4wNTUyIDExLjUwMDkgMTkuMDU1MiAxMS4wNjRDMTkuMDU1MiAxMC42MjcyIDE4LjcwMTEgMTAuMjczIDE4LjI2NDIgMTAuMjczQzE3LjgyNzMgMTAuMjczIDE3LjQ3MzIgMTAuNjI3MiAxNy40NzMyIDExLjA2NEMxNy40NzMyIDExLjUwMDkgMTcuODI3MyAxMS44NTUxIDE4LjI2NDIgMTEuODU1MVoiIGZpbGw9IiM2NTY1NjUiLz4KPHBhdGggZD0iTTE4LjI2NDIgOS4wMjU2MUMxOC42MDg2IDkuMDI1NjEgMTguODg3OSA4Ljc0NjM3IDE4Ljg4NzkgOC40MDE5MUMxOC44ODc5IDguMDU3NDUgMTguNjA4NiA3Ljc3ODIxIDE4LjI2NDIgNy43NzgyMUMxNy45MTk3IDcuNzc4MjEgMTcuNjQwNSA4LjA1NzQ1IDE3LjY0MDUgOC40MDE5MUMxNy42NDA1IDguNzQ2MzcgMTcuOTE5NyA5LjAyNTYxIDE4LjI2NDIgOS4wMjU2MVoiIGZpbGw9IiM2NTY1NjUiLz4KPC9zdmc+Cg==");this.store.getState().Microphone?(t.destroy(),O.removeEventListener("end",O.start),O.stop(),this.$emit("klava:microIsOff")):(t.show(),O.start(),O.addEventListener("end",O.start))}var n,r;"ArrowLeft"===i&&this.store.getState().Microphone&&(t.preventDefault(),this.$emit("klava:ArrowLeftIsOn")),"ArrowRight"===i&&this.store.getState().Microphone&&(t.preventDefault(),this.$emit("klava:ArrowRightIsOn")),j(t,this.store)}}],store:U}).render()}()}();